"use strict";(self.webpackChunkspringwolf_docs=self.webpackChunkspringwolf_docs||[]).push([[109],{1114:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"configuration/documenting-bindings","title":"Bindings","description":"To indicate the binding (protocol) that\'s documented, there are multiple options to document them.","source":"@site/docs/configuration/documenting-bindings.md","sourceDirName":"configuration","slug":"/configuration/documenting-bindings","permalink":"/docs/configuration/documenting-bindings","draft":false,"unlisted":false,"editUrl":"https://github.com/springwolf/springwolf.github.io/edit/master/docs/configuration/documenting-bindings.md","tags":[],"version":"current","sidebarPosition":66,"frontMatter":{"sidebar_position":66},"sidebar":"defaultSidebar","previous":{"title":"Producers","permalink":"/docs/configuration/documenting-producers"},"next":{"title":"Messages","permalink":"/docs/configuration/documenting-messages"}}');var o=i(4848),d=i(8453);const t={sidebar_position:66},a="Bindings",c={},l=[{value:"Operation binding",id:"operation-binding",level:2},{value:"Generic annotation",id:"generic-annotation",level:3},{value:"Channel binding",id:"channel-binding",level:2},{value:"Binding properties",id:"binding-properties",level:2},{value:"General",id:"general",level:3},{value:"Queue Name (Channel Name)",id:"queue-name-channel-name",level:4},{value:"Description",id:"description",level:4},{value:"Payload Type",id:"payload-type",level:4},{value:"Headers",id:"headers",level:4},{value:"AMQP",id:"amqp",level:3},{value:"Exchange Name",id:"exchange-name",level:4},{value:"Routing Key",id:"routing-key",level:4},{value:"Kafka",id:"kafka",level:3},{value:"Group Id",id:"group-id",level:4},{value:"Client Id",id:"client-id",level:4},{value:"Google PubSub",id:"google-pubsub",level:3},{value:"Message Binding Object",id:"message-binding-object",level:4}];function r(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,d.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"bindings",children:"Bindings"})}),"\n",(0,o.jsx)(n.p,{children:"To indicate the binding (protocol) that's documented, there are multiple options to document them.\nAdd at least one binding so that readers know the protocol in use and functionality like publishing works."}),"\n",(0,o.jsxs)(n.p,{children:["To use the protocol specific bindings, ensure that you have added the corresponding ",(0,o.jsx)(n.a,{href:"/docs/introduction/supported-protocols",children:"plugin"}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"operation-binding",children:"Operation binding"}),"\n",(0,o.jsxs)(n.p,{children:["Operation bindings describe protocol-specific information for the specific action (publish or subscribe).\nSee ",(0,o.jsx)(n.a,{href:"https://www.asyncapi.com/docs/reference/specification/v3.0.0#operationBindingsObject",children:"operation-binding"})," for details."]}),"\n",(0,o.jsx)(n.p,{children:"Supported protocol specific bindings:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"@AmqpAsyncOperationBinding"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"@KafkaAsyncOperationBinding"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"@JmsAsyncOperationBinding"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"@SnsAsyncOperationBinding"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"@SqsAsyncOperationBinding"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"@StompAsyncOperationBinding"})}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"generic-annotation",children:"Generic annotation"}),"\n",(0,o.jsx)(n.p,{children:"For custom protocols or properties, use the generic binding."}),"\n",(0,o.jsx)(n.p,{children:"You can define anything and there is no validation."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'@AsyncGenericOperationBinding(\n    type = "custom-binding",\n    fields = {\n        "internal-field=customValue",\n        "nested.key=nestedValue"\n    }\n)\n'})}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsxs)(n.p,{children:["See ",(0,o.jsx)(n.a,{href:"/docs/introduction/add-ons#generic-binding",children:"Add-Ons / Generic Annotation Binding"})," for more information"]})}),"\n",(0,o.jsx)(n.h2,{id:"channel-binding",children:"Channel binding"}),"\n",(0,o.jsxs)(n.p,{children:["Channel bindings describe protocol-specific information for the channel (topic, queue, etc).\nSee ",(0,o.jsx)(n.a,{href:"https://www.asyncapi.com/docs/reference/specification/v3.0.0#channelBindingsObject",children:"channel-binding"})," for details."]}),"\n",(0,o.jsx)(n.p,{children:"Supported protocol specific bindings:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"@KafkaAsyncChannelBinding"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"@GooglePubSubAsyncChannelBinding"})}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"binding-properties",children:"Binding properties"}),"\n",(0,o.jsx)(n.p,{children:"Explanation of the different binding properties."}),"\n",(0,o.jsx)(n.h3,{id:"general",children:"General"}),"\n",(0,o.jsx)(n.p,{children:"The following properties are the same for all bindings."}),"\n",(0,o.jsx)(n.h4,{id:"queue-name-channel-name",children:"Queue Name (Channel Name)"}),"\n",(0,o.jsx)(n.p,{children:"The queue name that will be used to publish messages to by the UI."}),"\n",(0,o.jsx)(n.h4,{id:"description",children:"Description"}),"\n",(0,o.jsxs)(n.p,{children:["Optional. The description allows for human-friendly text to verbosely explain the ",(0,o.jsx)(n.em,{children:"message"}),", like specific domain, what the topic is used for and which data it contains."]}),"\n",(0,o.jsx)(n.h4,{id:"payload-type",children:"Payload Type"}),"\n",(0,o.jsx)(n.p,{children:"The class object of the payload that will be published to this channel."}),"\n",(0,o.jsx)(n.h4,{id:"headers",children:"Headers"}),"\n",(0,o.jsx)(n.p,{children:"The Kafka headers describing the metadata of the payload, more details in the generic ProducerData."}),"\n",(0,o.jsxs)(n.p,{children:["The Springwolf comes with a special ",(0,o.jsx)(n.code,{children:"AsyncHeadersCloudEventConstants"})," to document CloudEvents."]}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"kafka"})," header ",(0,o.jsx)(n.code,{children:"__TypeId__"})," (constant from ",(0,o.jsx)(n.code,{children:"AbstractJavaTypeMapper.DEFAULT_CLASSID_FIELD_NAME"}),") can be documented as well."]}),"\n",(0,o.jsx)(n.h3,{id:"amqp",children:"AMQP"}),"\n",(0,o.jsx)(n.h4,{id:"exchange-name",children:"Exchange Name"}),"\n",(0,o.jsx)(n.p,{children:"The exchange name that will be used to bind queues to."}),"\n",(0,o.jsx)(n.h4,{id:"routing-key",children:"Routing Key"}),"\n",(0,o.jsx)(n.p,{children:"The routing key used when publishing a message."}),"\n",(0,o.jsx)(n.h3,{id:"kafka",children:"Kafka"}),"\n",(0,o.jsx)(n.p,{children:"Channel Binding Object:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"@KafkaAsyncChannelBinding(\n        partitions = 3,\n        replicas = 1,\n        topicConfiguration =\n                @KafkaAsyncChannelBinding.KafkaChannelTopicConfiguration(\n                        cleanup = {CleanupPolicy.COMPACT, CleanupPolicy.DELETE},\n                        retentionMs = 86400000L,\n                        retentionBytes = -1L,\n                        deleteRetentionMs = 86400000L,\n                        maxMessageBytes = 1048588))\n"})}),"\n",(0,o.jsx)(n.h4,{id:"group-id",children:"Group Id"}),"\n",(0,o.jsx)(n.p,{children:"The group id that will be used during message consumption"}),"\n",(0,o.jsx)(n.h4,{id:"client-id",children:"Client Id"}),"\n",(0,o.jsx)(n.p,{children:"The client id to identify the consumer"}),"\n",(0,o.jsx)(n.h3,{id:"google-pubsub",children:"Google PubSub"}),"\n",(0,o.jsx)(n.p,{children:"The Channel Bindings Object is used to describe the Google Cloud Pub/Sub Topic details."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'@GooglePubSubAsyncChannelBinding(\n            messageRetentionDuration = "messageRetentionDuration",\n            messageStoragePolicy =\n                    @GooglePubsubAsyncMessageStoragePolicy(allowedPersistenceRegions = {"region1", "region2"}),\n            schemaSettings =\n                    @GooglePubSubAsyncSchemaSetting(\n                            encoding = "BINARY",\n                            firstRevisionId = "firstRevisionId",\n                            lastRevisionId = "lastRevisionId",\n                            name = "projects/{project}/schemas/{schema}"))\n'})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"MessageRetentionDuration"}),": Indicates the minimum duration to retain a message after it's published to the topic"]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"Message Storage Policy"}),": The Message Storage Policy Object is used to describe the Google Cloud Pub/Sub MessageStoragePolicy."]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"A list of IDs of GCP regions where messages that are published to the topic may be persisted in storage"}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"Schema Settings"}),": The Schema Settings Object is used to describe the Google Cloud Pub/Sub SchemaSettings."]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"encoding: The encoding of the message"}),"\n",(0,o.jsx)(n.li,{children:"firstRevisionId: The minimum (inclusive) revision allowed for validating messages"}),"\n",(0,o.jsx)(n.li,{children:"lastRevisionId: The maximum (inclusive) revision allowed for validating messages"}),"\n",(0,o.jsxs)(n.li,{children:["name: The name of the schema that messages published should be validated against (The format is ",(0,o.jsx)(n.code,{children:"projects/{project}/schemas/{schema}"}),".)"]}),"\n"]}),"\n",(0,o.jsx)(n.h4,{id:"message-binding-object",children:"Message Binding Object"}),"\n",(0,o.jsx)(n.p,{children:"The Message Binding Object is used to describe the Google Cloud Pub/Sub PubsubMessage details, alongside with pertinent parts of the Google Cloud Pub/Sub Schema Object."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'@GooglePubSubAsyncMessageBinding(\n            orderingKey = "key",\n            schema = @GooglePubSubAsyncMessageSchema(name = "projects/{project}/schemas/{schema}"))\n'})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"OrderingKey"}),": If non-empty, identifies related messages for which publish order should be respected"]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"Schema Definition"}),": The Schema Definition Object is used to describe the Google Cloud Pub/Sub Schema Object with AsyncAPI. While some of this information could be, or is, described using native AsyncAPI, for consistency it makes sense to always provide this information here, especially for cases where AsyncAPI doesn't natively support describing payloads using a supported Google Cloud Pub/Sub schema format like Protobuf"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"name: The name of the schema"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(r,{...e})}):r(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>a});var s=i(6540);const o={},d=s.createContext(o);function t(e){const n=s.useContext(d);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),s.createElement(d.Provider,{value:n},e.children)}}}]);